# 二、网络协议

 ## http与https有何区别
 
    1、https协议需要到ca申请证书，一般免费证书较少，因而需要一定
    2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输
    3、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是4
    4、http的连接很简单，是  状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。
  
 ## HTTP请求中get和post区别
 
    1、GET请求是通过URL直接请求数据，数据信息可以在URL中直接看到，比如浏览器访问；而POST请求是放在请求头中的，我们是无法直接看到的；
    2、GET提交有数据大小的限制，一般是不超过1024个字节，而这种说法也不完全准确，HTTP协议并没有设定URL字节长度的上限，而是浏览器做了些处理，所以长度依据浏览器的不同有所不同；POST请求在HTTP协议中也没有做说明，一般来说是没有设置限制的，但是实际上浏览器也有默认值。总体来说，少量的数据使用GET，大量的数据使用POST。
    3、GET请求因为数据参数是暴露在URL中的，所以安全性比较低，比如密码是不能暴露的，就不能使用GET请求；POST请求中，请求参数信息是放在请求头的，所以安全性较高，可以使用。在实际中，涉及到登录操作的时候，尽量使用HTTPS请求，安全性更好。

 ## tcp/ip三次握手 
 
    含义理解
       TCP/IP协议不仅仅指的是TCP和IP两个协议，而是指一个由FTP、SMTP、TCP、UDP、IP等协议构成的协议簇， 只是因为在TCP/IP协议中TCP协议和IP协议最具代表性，所以被称为TCP/IP协议。

    三次握手：
     （1）客户 端发送一个带SYN标志的TCP报文到server。这是三次握手过程中的报文1。
     （2） server端回应client的，这是三次握手中的第2个报文。这个报文同一时候带ACK标志和SYN标志。
          因此它表示对刚才clientSYN报文的回应。同一时候又标志SYN给client，询问client是否准备好进行数据通 讯。
     （3） 客户必须再次回应服务段一个ACK报文，这是报文段3。
     （4）连接终止协议（四次握手）
     
 ## TCP/UDP

    TCP的优点： 可靠，稳定 TCP的可靠体现在TCP在传递数据之前，会有三次握手来建立连接，而且在数据传递时，有确认、窗口、重传、拥塞控制机制，在数据传完后，还会断开连接用来节约系统资源。
    TCP的缺点： 慢，效率低，占用系统资源高，易被攻击 TCP在传递数据之前，要先建连接，这会消耗时间，而且在数据传递时，确认机制、重传机制、拥塞控制机制等都会消耗大量的时间，而且要在每台设备上维护所有的传输连接，事实上，每个连接都会占用系统的CPU、内存等硬件资源。 而且，因为TCP有确认机制、三次握手机制，这些也导致TCP容易被人利用，实现DOS、DDOS、CC等攻击。

    UDP的优点： 快，比TCP稍安全 UDP没有TCP的握手、确认、窗口、重传、拥塞控制等机制，UDP是一个无状态的传输协议，所以它在传递数据时非常快。没有TCP的这些机制，UDP较TCP被攻击者利用的漏洞就要少一些。但UDP也是无法避免攻击的，比如：UDP Flood攻击……
    UDP的缺点： 不可靠，不稳定 因为UDP没有TCP那些可靠的机制，在数据传递时，如果网络质量不好，就会很容易丢包。

    小结TCP与UDP的区别：
     1.基于连接与无连接；
     2.对系统资源的要求（TCP较多，UDP少）；
     3.UDP程序结构较简单；
     4.流模式与数据报模式 ；
     5.TCP保证数据正确性，UDP可能丢包，TCP保证数据顺序，UDP不保证。
     
     什么时候应该使用TCP： 当对网络通讯质量有要求的时候，比如：整个数据要准确无误的传递给对方，这往往用于一些要求可靠的应用，比如HTTP、HTTPS、FTP等传输文件的协议，POP、SMTP等邮件传输的协议。 在日常生活中，常见使用TCP协议的应用如下： 浏览器，用的HTTP FlashFXP，用的FTP Outlook，用的POP、SMTP Putty，用的Telnet、SSH QQ文件传输 ………… 什么时候应该使用UDP： 当对网络通讯质量要求不高的时候，要求网络通讯速度能尽量的快，这时就可以使用UDP。 比如，日常生活中，常见使用UDP协议的应用如下： QQ语音 QQ视频 TFTP ……
     有些应用场景对可靠性要求不高会用到UPD，比如长视频，要求速率
     
 ## cookie、token、session的区别
   
   从安全性优先级来说：

   ### 1、优先级
      Cookie<session<token

   ### 2、安全性
      Cookie:
      1、cookie不是很安全，别人可以分析存放在本地的cookie并进行cookie欺骗，考虑到安全应当使用session
      2、HTTP是一种无状态协议,服务器没有办法单单从网络连接上面知道访问者的身份,为了解决这个问题,就诞生了Cookie
      3、Cookie实际上是一小段的文本信息。客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie
      4、客户端浏览器会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。服务器检查该Cookie，以此来辨认用户状态。服务器还可以根据需要修改Cookie的内容。

 
     session:
      1、session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，考虑到减轻服务器性能方面，应当使用cookie
      2、关闭浏览器不会关闭session,它具失效日期，失效后服务器认为客户端停止了活动，并删除session以节省空间

     Token:
      1、作为身份认证 token安全性比session好，因为每个请求都有签名还能防止监听以及重放攻击
      2、Oauth token提供的是认证和授权，认证针对用户，授权针对app
      3、token的生成一般是采用uuid保证唯一性，当用户登录时为其生成唯一的token，存储一般保存在数据库中。token过期时间采用把token二次保存在cookie或session里面，根据cookie和session的过期时间去维护token的过期时间

 
   ### 开发过程举例：

    案例一：
     项目中我们的用户数据可能需要和第三方共享,或允许第三方调用我们的API则用token
     
    案例二:
     公司内部的网站，自己的App，就可以用cookie、session
    一般来说我们可以将登录信息放在session，其他信息保存在cookie

    案例三：
     观察微信、支付宝登录接口用的就是token
     

